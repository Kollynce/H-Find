!function(e){var t,a={saveSelection:function(){e(this).data("editor").focus(),window.getSelection?(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount&&e(this).data("currentRange",sel.getRangeAt(0))):document.selection&&document.selection.createRange?e(this).data("currentRange",document.selection.createRange()):e(this).data("currentRange",null)},restoreSelection:function(t,a){var n=e(this).data("currentRange");if(n)if(window.getSelection){if(t)if(n.deleteContents(),"html"==a){var l=document.createElement("div");l.innerHTML=t;for(var i,o=document.createDocumentFragment();i=l.firstChild;)o.appendChild(i);n.insertNode(o)}else n.insertNode(document.createTextNode(t));sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(n)}else document.selection&&n.select&&(n.select(),t&&("html"==a?n.pasteHTML(t):n.text=t))},restoreIESelection:function(){var t=e(this).data("currentRange");t&&(window.getSelection?(sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(t)):document.selection&&t.select&&t.select())},insertTextAtSelection:function(e,t){var a,n;if(window.getSelection){if((a=window.getSelection()).getRangeAt&&a.rangeCount){(n=a.getRangeAt(0)).deleteContents();var l=document.createTextNode(e);if("html"==t){var i=document.createElement("div");i.innerHTML=e;for(var o,r=document.createDocumentFragment();o=i.firstChild;)r.appendChild(o);n.insertNode(r)}else n.insertNode(l),n.selectNode(l);a.removeAllRanges(),(n=n.cloneRange()).collapse(!1),a.addRange(n)}}else document.selection&&document.selection.createRange&&((n=document.selection.createRange()).pasteHTML(e),n.select())},imageWidget:function(){var t=e("<div/>",{class:"row"}).append(e("<div/>",{id:"imgErrMsg"})),n=e("<div/>",{class:"tabbable tabs-left"}),l=e("<ul/>",{class:"nav nav-tabs"}).append(e("<li/>",{class:"active"}).append(e("<a/>",{href:"#uploadImageBar","data-toggle":"tab"}).html("From Computer"))).append(e("<li/>").append(e("<a/>",{href:"#imageFromLinkBar","data-toggle":"tab"}).html("From URL"))),i=e("<div/>",{class:"tab-content"}),o=e("<div/>",{id:"uploadImageBar",class:"tab-pane active"});handleFileSelect=function(t){for(var n,l=t.target.files,i=0;n=l[i];i++)if(n.type.match("image.*")&&n.name.match(/(?:gif|jpg|png|jpeg)$/)){var o=new FileReader;o.onload=function(t){return function(a){var n=e("<li/>",{class:"col-xs-12 col-sm-6 col-md-3 col-lg-3"}),l=e("<a/>",{href:"javascript:void(0)",class:"thumbnail"});e("<img/>",{src:a.target.result,title:escape(t.name)}).appendTo(l).click(function(){e("#imageList").data("current",e(this).attr("src"))});n.append(l).appendTo(e("#imageList"))}}(n),o.readAsDataURL(n)}else a.showMessage.apply(this,["imgErrMsg","Invalid file type"])};var r=e("<input/>",{type:"file",class:"inline-form-control",multiple:"multiple"});r.on("change",handleFileSelect),o.append(r);var s=e("<div/>",{id:"imageFromLinkBar",class:"tab-pane"}),d=e("<div/>",{class:"input-group"});e("<input/>",{type:"url",class:"form-control",id:"imageURL",placeholder:"Enter URL"}).appendTo(d),e("<button/>",{class:"btn btn-success",type:"button"}).html("Go!").click(function(){var t=e("#imageURL").val();if(""==t)return a.showMessage.apply(this,["imgErrMsg","Please enter image url"]),!1;var n=e("<li/>",{class:"span6 col-xs-12 col-sm-6 col-md-3 col-lg-3"}),l=e("<a/>",{href:"javascript:void(0)",class:"thumbnail"});e("<img/>",{src:t}).error(function(){return a.showMessage.apply(this,["imgErrMsg","Invalid image url"]),!1}).load(function(){e(this).appendTo(l).click(function(){e("#imageList").data("current",e(this).attr("src"))}),n.append(l).appendTo(e("#imageList"))})}).appendTo(e("<span/>",{class:"input-group-btn form-control-button-right"}).appendTo(d));s.append(d),i.append(o).append(s),n.append(l).append(i);var c=e("<div/>",{class:"col-xs-12 col-sm-12 col-md-12 col-lg-12"});e("<ul/>",{class:"thumbnails padding-top list-unstyled",id:"imageList"}).appendTo(c);return t.append(n).append(c),t},tableWidget:function(t){var a="";return void 0!==t&&(a="Edt"),e("<div/>",{class:"row-fluid"}).append(e("<div/>",{id:"tblErrMsg"+a})).append(e("<form/>",{id:"tblForm"+a}).append(e("<div/>",{class:"row"}).append(e("<div/>",{id:"tblInputsLeft"+a,class:"col-xs-12 col-sm-6 col-md-6 col-lg-6"}).append(e("<label/>",{for:"tblRows"+a,text:"Rows"})).append(e("<input/>",{id:"tblRows"+a,type:"text",class:"form-control form-control-width",value:2})).append(e("<label/>",{for:"tblColumns"+a,text:"Columns"})).append(e("<input/>",{id:"tblColumns"+a,type:"text",class:"form-control form-control-width",value:2})).append(e("<label/>",{for:"tblWidth"+a,text:"Width"})).append(e("<input/>",{id:"tblWidth"+a,type:"text",class:"form-control form-control-width",value:400})).append(e("<label/>",{for:"tblHeight"+a,text:"Height"})).append(e("<input/>",{id:"tblHeight"+a,type:"text",class:"form-control form-control-width"}))).append(e("<div/>",{id:"tblInputsRight"+a,class:"col-xs-12 col-sm-6 col-md-6 col-lg-6"}).append(e("<label/>",{for:"tblAlign"+a,text:"Alignment"})).append(e("<select/>",{id:"tblAlign"+a,class:"form-control form-control-width"}).append(e("<option/>",{text:"Choose",value:""})).append(e("<option/>",{text:"Left",value:"left"})).append(e("<option/>",{text:"Center",value:"center"})).append(e("<option/>",{text:"Right",value:"right"}))).append(e("<label/>",{for:"tblBorder"+a,text:"Border size"})).append(e("<input/>",{id:"tblBorder"+a,type:"text",class:"form-control form-control-width",value:1})).append(e("<label/>",{for:"tblCellspacing"+a,text:"Cell spacing"})).append(e("<input/>",{id:"tblCellspacing"+a,type:"text",class:"form-control form-control-width",value:1})).append(e("<label/>",{for:"tblCellpadding"+a,text:"Cell padding"})).append(e("<input/>",{id:"tblCellpadding"+a,type:"text",class:"form-control form-control-width",value:1})))))},imageAttributeWidget:function(){return e("<div/>",{class:"row-fluid"}).append(e("<div/>",{id:"imageErrMsg"})).append(e("<input/>",{id:"imgAlt",type:"text",class:"form-control form-control-link ",placeholder:"Alt Text"})).append(e("<input/>",{id:"imgTarget",class:"form-control form-control-link ",type:"text",placeholder:"Link Target"})).append(e("<input/>",{id:"imgHidden",type:"hidden"}))},getHTMLTable:function(t,a,n){for(var l=e("<table/>",{class:"table"}),i=0;i<n.length;i++)""!=n[i].value&&("width"==n[i].attribute||"height"==n[i].attribute?l.css(n[i].attribute,n[i].value):l.attr(n[i].attribute,n[i].value));for(i=1;i<=t;i++){for(var o=e("<tr/>"),r=1;r<=a;r++){e("<td/>").html("&nbsp;").appendTo(o)}o.appendTo(l)}return l},init:function(n){var l=[{name:"Black",hex:"#000000"},{name:"MediumBlack",hex:"#444444"},{name:"LightBlack",hex:"#666666"},{name:"DimBlack",hex:"#999999"},{name:"Gray",hex:"#CCCCCC"},{name:"DimGray",hex:"#EEEEEE"},{name:"LightGray",hex:"#F3F3F3"},{name:"White",hex:"#FFFFFF"},{name:"libreak",hex:null},{name:"Red",hex:"#FF0000"},{name:"Orange",hex:"#FF9900"},{name:"Yellow",hex:"#FFFF00"},{name:"Lime",hex:"#00FF00"},{name:"Cyan",hex:"#00FFFF"},{name:"Blue",hex:"#0000FF"},{name:"BlueViolet",hex:"#8A2BE2"},{name:"Magenta",hex:"#FF00FF"},{name:"libreak",hex:null},{name:"LightPink",hex:"#FFB6C1"},{name:"Bisque",hex:"#FCE5CD"},{name:"BlanchedAlmond",hex:"#FFF2CC"},{name:"LightLime",hex:"#D9EAD3"},{name:"LightCyan",hex:"#D0E0E3"},{name:"AliceBlue",hex:"#CFE2F3"},{name:"Lavender",hex:"#D9D2E9"},{name:"Thistle",hex:"#EAD1DC"},{name:"LightCoral",hex:"#EA9999"},{name:"Wheat",hex:"#F9CB9C"},{name:"NavajoWhite",hex:"#FFE599"},{name:"DarkSeaGreen",hex:"#B6D7A8"},{name:"LightBlue",hex:"#A2C4C9"},{name:"SkyBlue",hex:"#9FC5E8"},{name:"LightPurple",hex:"#B4A7D6"},{name:"PaleVioletRed",hex:"#D5A6BD"},{name:"IndianRed",hex:"#E06666"},{name:"LightSandyBrown",hex:"#F6B26B"},{name:"Khaki",hex:"#FFD966"},{name:"YellowGreen",hex:"#93C47D"},{name:"CadetBlue",hex:"#76A5AF"},{name:"DeepSkyBlue",hex:"#6FA8DC"},{name:"MediumPurple",hex:"#8E7CC3"},{name:"MediumVioletRed",hex:"#C27BA0"},{name:"Crimson",hex:"#CC0000"},{name:"SandyBrown",hex:"#E69138"},{name:"Gold",hex:"#F1C232"},{name:"MediumSeaGreen",hex:"#6AA84F"},{name:"Teal",hex:"#45818E"},{name:"SteelBlue",hex:"#3D85C6"},{name:"SlateBlue",hex:"#674EA7"},{name:"VioletRed",hex:"#A64D79"},{name:"Brown",hex:"#990000"},{name:"Chocolate",hex:"#B45F06"},{name:"GoldenRod",hex:"#BF9000"},{name:"Green",hex:"#38761D"},{name:"SlateGray",hex:"#134F5C"},{name:"RoyalBlue",hex:"#0B5394"},{name:"Indigo",hex:"#351C75"},{name:"Maroon",hex:"#741B47"},{name:"DarkRed",hex:"#660000"},{name:"SaddleBrown",hex:"#783F04"},{name:"DarkGoldenRod",hex:"#7F6000"},{name:"DarkGreen",hex:"#274E13"},{name:"DarkSlateGray",hex:"#0C343D"},{name:"Navy",hex:"#073763"},{name:"MidnightBlue",hex:"#20124D"},{name:"DarkMaroon",hex:"#4C1130"}],i=[{name:"Exclamation ",text:"!"},{name:"At",text:"@"},{name:"Hash",text:"#"},{name:"Percentage",text:"%"},{name:"Uppercase",text:"^"},{name:"Ampersand",text:"&"},{name:"Asterisk",text:"*"},{name:"OpenBracket",text:"("},{name:"CloseBracket",text:")"},{name:"Underscore",text:"_"},{name:"Hiphen",text:"-"},{name:"Plus",text:"+"},{name:"Equalto",text:"="},{name:"OpenSquareBracket",text:"["},{name:"CloseSquareBracket",text:"]"},{name:"OpenCurly",text:"{"},{name:"CloseCurly",text:"}"},{name:"Pipe",text:"|"},{name:"Colon",text:":"},{name:"Semicolon",text:";"},{name:"Single quote",text:"&#39;"},{name:"Double quote",text:"&#34;"},{name:"Left single curly quote",text:"&lsquo;"},{name:"right single curly quote",text:"&rsquo;"},{name:"Forward-slash",text:"&#47;"},{name:"Back-slash",text:"&#92;"},{name:"LessThan",text:"<"},{name:"GreaterThan",text:">"},{name:"QuestionMark",text:"?"},{name:"Tilda",text:"~"},{name:"Grave accent",text:"`"},{name:"Micron",text:"&micro;"},{name:"Paragraph sign",text:"&para;"},{name:"Plus/minus",text:"&plusmn;"},{name:"Trademark",text:"&trade;"},{name:"Copyright",text:"&copy;"},{name:"Registered",text:"&reg;"},{name:"Section",text:"&sect;"},{name:"right double angle quotes",text:"&#187;"},{name:"fraction one quarter",text:"&#188;"},{name:"fraction one half",text:"&#189;"},{name:"fraction three quarters",text:"&#190;"},{name:"Dollar",text:"$"},{name:"Euro",text:"&euro;"},{name:"Pound",text:"&pound;"},{name:"Yen",text:"&yen;"},{name:"Cent",text:"&#162;"},{name:"IndianRupee",text:"&#8377;"}],o={fonteffects:!0,texteffects:!0,aligneffects:!0,textformats:!0,actions:!0,insertoptions:!0,extraeffects:!0,advancedoptions:!0,screeneffects:!0,fonts:{select:!0,default:"Font",tooltip:"Fonts",commandname:"fontName",custom:null},styles:{select:!0,default:"Formatting",tooltip:"Paragraph Format",commandname:"formatBlock",custom:null},font_size:{select:!0,default:"Font size",tooltip:"Font Size",commandname:"fontSize",custom:null},color:{text:"A",icon:"fa fa-font",tooltip:"Text/Background Color",commandname:null,custom:function(t){var n=e(this),i=0,o=e("<div/>",{id:"paletteCntr",class:"activeColour",css:{display:"none",width:"335px"}}).click(function(e){e.stopPropagation()}),r=e("<div/>",{id:"colorpellete"}),s=e("<ul />",{id:"color_ui"}).append(e("<li />").css({width:"145px",display:"Block",height:"25px"}).html("<div>Text Color</div>")),d=e("<div/>",{id:"bg_colorpellete"}),c=e("<ul />",{id:"bgcolor_ui"}).append(e("<li />").css({width:"145px",display:"Block",height:"25px"}).html("<div>Background Color</div>"));if(n.data("colorBtn")?(i=1,n.data("colorBtn",null)):n.data("colorBtn",1),0==i){for(var p=0;p<l.length;p++)null!=l[p].hex?(s.append(e("<li />").css("background-color",l[p].hex).mousedown(function(e){e.preventDefault()}).click(function(){var t=a.rgbToHex.apply(this,[e(this).css("background-color")]);a.restoreSelection.apply(this),a.setStyleWithCSS.apply(this),document.execCommand("forecolor",!1,t),e("#paletteCntr").remove(),n.data("colorBtn",null)})),c.append(e("<li />").css("background-color",l[p].hex).mousedown(function(e){e.preventDefault()}).click(function(){var t=a.rgbToHex.apply(this,[e(this).css("background-color")]);a.restoreSelection.apply(this),a.setStyleWithCSS.apply(this),document.execCommand("backColor",!1,t),e("#paletteCntr").remove(),n.data("colorBtn",null)}))):(s.append(e("<li />").css({width:"145px",display:"Block",height:"5px"})),c.append(e("<li />").css({width:"145px",display:"Block",height:"5px"})));s.appendTo(r),c.appendTo(d),r.appendTo(o),d.appendTo(o),o.insertAfter(t),e("#paletteCntr").slideDown("slow")}else e("#paletteCntr").remove()}},bold:{text:"B",icon:"fa fa-bold",tooltip:"Bold",commandname:"bold",custom:null},italics:{text:"I",icon:"fa fa-italic",tooltip:"Italics",commandname:"italic",custom:null},underline:{text:"U",icon:"fa fa-underline",tooltip:"Underline",commandname:"underline",custom:null},strikeout:{text:"Strikeout",icon:"fa fa-strikethrough",tooltip:"Strike Through",commandname:"strikeThrough",custom:null},ol:{text:"N",icon:"fa fa-list-ol",tooltip:"Insert/Remove Numbered List",commandname:"insertorderedlist",custom:null},ul:{text:"Bullet",icon:"fa fa-list-ul",tooltip:"Insert/Remove Bulleted List",commandname:"insertunorderedlist",custom:null},undo:{text:"undo",icon:"fa fa-undo",tooltip:"Undo",commandname:"undo",custom:null},redo:{text:"redo",icon:"fa fa-repeat",tooltip:"Redo",commandname:"redo",custom:null},l_align:{text:"leftalign",icon:"fa fa-align-left",tooltip:"Align Left",commandname:"justifyleft",custom:null},r_align:{text:"rightalign",icon:"fa fa-align-right",tooltip:"Align Right",commandname:"justifyright",custom:null},c_align:{text:"centeralign",icon:"fa fa-align-center",tooltip:"Align Center",commandname:"justifycenter",custom:null},justify:{text:"justify",icon:"fa fa-align-justify",tooltip:"Justify",commandname:"justifyfull",custom:null},unlink:{text:"Unlink",icon:"fa fa-unlink",tooltip:"Unlink",commandname:"unlink",custom:null},insert_link:{modal:!0,modalId:"InsertLink",icon:"fa fa-link",tooltip:"Insert Link",modalHeader:"Insert Hyperlink",modalBody:e("<div/>",{class:"form-group"}).append(e("<div/>",{id:"errMsg"})).append(e("<input/>",{type:"text",id:"inputText",class:"form-control form-control-link ",placeholder:"Text to Display"})).append(e("<input/>",{type:"text",id:"inputUrl",required:!0,class:"form-control form-control-link",placeholder:"Enter URL"})),beforeLoad:function(){t=this,e("#inputText").val(""),e("#inputUrl").val(""),e(".alert").alert("close"),""!=e(t).data("currentRange")&&e("#inputText").val(e(t).data("currentRange"))},onSave:function(){var n=e("#inputText").val(),l=e("#inputUrl").val(),i=e(t).data("currentRange");if(""==l)return a.showMessage.apply(t,["errMsg","Please enter url"]),!1;if(!l.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/))return a.showMessage.apply(t,["errMsg","Enter valid url"]),!1;if(""==i&&""==n&&(n=l),navigator.userAgent.match(/MSIE/i)){var o='<a href="'+l+'" target="_blank">'+n+"</a>";a.restoreSelection.apply(t,[o,"html"])}else a.restoreSelection.apply(t,[n]),document.execCommand("createLink",!1,l);return e(t).data("editor").find('a[href="'+l+'"]').each(function(){e(this).attr("target","_blank")}),e(".alert").alert("close"),e("#InsertLink").modal("hide"),e(t).data("editor").focus(),!1}},insert_img:{modal:!0,modalId:"InsertImage",icon:"fa fa-picture-o",tooltip:"Insert Image",modalHeader:"Insert Image",modalBody:a.imageWidget.apply(this),beforeLoad:function(){e("#imageURL").val(""),e("#uploadImageBar :input").val(""),e("#imageList").data("current","")},onSave:function(){if(a.restoreSelection.apply(this),!e("#imageList").data("current"))return a.showMessage.apply(this,["imgErrMsg","Please select an image"]),!1;if(navigator.userAgent.match(/MSIE/i)){var t='<img src="'+e("#imageList").data("current")+'"/>';a.restoreSelection.apply(this,[t,"html"])}else document.execCommand("insertimage",!1,e("#imageList").data("current"));e("#InsertImage").modal("hide"),e(this).data("editor").focus()}},insert_table:{modal:!0,modalId:"InsertTable",icon:"fa fa-table",tooltip:"Insert Table",modalHeader:"Insert Table",modalBody:a.tableWidget.apply(this),beforeLoad:function(){e("#tblForm").each(function(){this.reset()})},onSave:function(){a.restoreSelection.apply(this);var t=e("#tblRows").val(),n=e("#tblColumns").val(),l=e("#tblWidth").val(),i=e("#tblHeight").val(),o=e("#tblAlign").val(),r=e("#tblBorder").val(),s=e("#tblCellspacing").val(),d=e("#tblCellpadding").val(),c=/^[0-9]+$/,p=/^auto$|^[+-]?[0-9]+\.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc)?$/gi,m=/^[0-9]+\.?([0-9])?$/;if(!t.match(c))return a.showMessage.apply(this,["tblErrMsg","Rows must be a positive number"]),!1;if(!n.match(c))return a.showMessage.apply(this,["tblErrMsg","Columns must be a positive number"]),!1;if(""!=l&&!l.match(p))return a.showMessage.apply(this,["tblErrMsg","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]),!1;if(""!=i&&!i.match(p))return a.showMessage.apply(this,["tblErrMsg","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]),!1;if(""!=r&&!r.match(m))return a.showMessage.apply(this,["tblErrMsg","Border size must be a positive number"]),!1;if(""!=s&&!s.match(m))return a.showMessage.apply(this,["tblErrMsg","Cell spacing must be a positive number"]),!1;if(""!=d&&!d.match(m))return a.showMessage.apply(this,["tblErrMsg","Cell padding must be a positive number"]),!1;var u=e("<div/>"),h=[{attribute:"align",value:o},{attribute:"border",value:r},{attribute:"cellspacing",value:s},{attribute:"cellpadding",value:d},{attribute:"width",value:l},{attribute:"height",value:i}];a.getHTMLTable.apply(this,[t,n,h]).appendTo(u),navigator.userAgent.match(/MSIE/i)?a.restoreSelection.apply(this,[u.html(),"html"]):document.execCommand("insertHTML",!1,u.html()),e("#InsertTable").modal("hide"),e(this).data("editor").focus()}},hr_line:{text:"HR",icon:"fa fa-minus",tooltip:"Horizontal Rule",commandname:"insertHorizontalRule",custom:null},block_quote:{text:"Block Quote",icon:"fa fa-quote-right",tooltip:"Block Quote",commandname:null,custom:function(){a.setStyleWithCSS.apply(this),navigator.userAgent.match(/MSIE/i)?document.execCommand("indent",!1,null):document.execCommand("formatBlock",!1,"<blockquote>")}},indent:{text:"Indent",icon:"fa fa-indent",tooltip:"Increase Indent",commandname:"indent",custom:null},outdent:{text:"Outdent",icon:"fa fa-outdent",tooltip:"Decrease Indent",commandname:"outdent",custom:null},print:{text:"Print",icon:"fa fa-print",tooltip:"Print",commandname:null,custom:function(){oDoc=e(this).data("editor");var t=window.open("","_blank","width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes");t.document.open(),t.document.write('<!doctype html><html><head><title>Print</title></head><body onload="print();">'+oDoc.html()+"</body></html>"),t.document.close()}},rm_format:{text:"Remove format",icon:"fa fa-eraser",tooltip:"Remove Formatting",commandname:"removeformat",custom:null},select_all:{text:"Select all",icon:"fa fa-file-text",tooltip:"Select All",commandname:null,custom:function(){document.execCommand("selectall",null,null)}},togglescreen:{text:"Toggle Screen",icon:"fa fa-arrows-alt",tooltip:"Toggle Screen",commandname:null,custom:function(t,a){e(this).data("editor").parent().toggleClass("fullscreen");var n=0;e(this).data("statusBar").length&&(n=e(this).data("statusBar").height()),e(this).data("editor").parent().hasClass("fullscreen")?e(this).data("editor").css({height:e(this).data("editor").parent().height()-(e(this).data("menuBar").height()+n)-13}):e(this).data("editor").css({height:""})}},splchars:{text:"S",icon:"fa fa-asterisk",tooltip:"Insert Special Character",commandname:null,custom:function(t){a.restoreIESelection.apply(this);var n=0,l=e("<div/>",{id:"specialchar",class:"specialCntr",css:{display:"none"}}).click(function(e){e.stopPropagation()}),o=e("<ul />",{id:"special_ui"}),r=this;if(e(this).data("editor").data("splcharsBtn")?(n=1,e(this).data("editor").data("splcharsBtn",null)):e(this).data("editor").data("splcharsBtn",1),0==n){for(var s=0;s<i.length;s++)o.append(e("<li />").html(i[s].text).attr("title",i[s].name).mousedown(function(e){e.preventDefault()}).click(function(t){if(navigator.userAgent.match(/MSIE/i)){var n=e(this).html();a.insertTextAtSelection.apply(this,[n,"html"])}else document.execCommand("insertHTML",!1,e(this).html());e("#specialchar").remove(),e(r).data("editor").data("splcharsBtn",null)}));o.prependTo(l),l.insertAfter(t),e("#specialchar").slideDown("slow")}else e("#specialchar").remove()}},source:{text:"Source",icon:"fa fa-code",tooltip:"Source",commandname:null,custom:function(e,t){a.getSource.apply(this,[e,t])}},params:{obj:null}},r={texteffects:["bold","italics","underline","color"],aligneffects:["l_align","c_align","r_align","justify"],textformats:["indent","outdent","block_quote","ol","ul"],fonteffects:["fonts","styles","font_size"],actions:["undo","redo"],insertoptions:["insert_link","unlink","insert_img","insert_table"],extraeffects:["strikeout","hr_line","splchars"],advancedoptions:["print","rm_format","select_all","source"],screeneffects:["togglescreen"]},s=e.extend({texteffects:!0,aligneffects:!0,textformats:!0,fonteffects:!0,actions:!0,insertoptions:!0,extraeffects:!0,advancedoptions:!0,screeneffects:!0,bold:!0,italics:!0,underline:!0,ol:!0,ul:!0,undo:!0,redo:!0,l_align:!0,r_align:!0,c_align:!0,justify:!0,insert_link:!0,unlink:!0,insert_img:!0,hr_line:!0,block_quote:!0,source:!0,strikeout:!0,indent:!0,outdent:!0,fonts:{"Sans serif":"arial,helvetica,sans-serif",Serif:"times new roman,serif",Wide:"arial black,sans-serif",Narrow:"arial narrow,sans-serif","Comic Sans MS":"comic sans ms,sans-serif","Courier New":"courier new,monospace",Garamond:"garamond,serif",Georgia:"georgia,serif",Tahoma:"tahoma,sans-serif","Trebuchet MS":"trebuchet ms,sans-serif",Verdana:"verdana,sans-serif"},styles:{"Heading 1":"<h1>","Heading 2":"<h2>","Heading 3":"<h3>","Heading 4":"<h4>","Heading 5":"<h5>","Heading 6":"<h6>",Paragraph:"<p>"},print:!0,rm_format:!0,status_bar:!0,font_size:{Small:"2",Normal:"3",Medium:"4",Large:"5",Huge:"6"},color:l,splchars:i,insert_table:!0,select_all:!0,togglescreen:!0},n),d=e("<div/>",{class:"row-fluid Editor-container"});e(this).hide().after(d);var c=e("<div/>",{id:"menuBarDiv",class:"row-fluid"}).prependTo(d),p=e("<div/>",{class:"Editor-editor",css:{overflow:"auto"},contenteditable:"true"}).appendTo(d),m=e("<div/>",{id:"statusbar",class:"row-fluid",unselectable:"on"}).appendTo(d);e(this).data("menuBar",c),e(this).data("editor",p),e(this).data("statusBar",m);var u=this;s.status_bar&&p.keyup(function(t){var n=a.getWordCount.apply(u),l=a.getCharCount.apply(u);e(u).data("statusBar").html('<div class="label">Words : '+n+"</div>"),e(u).data("statusBar").append('<div class="label">Characters : '+l+"</div>")});for(var h in o)if(s[h])if(h in r){for(var g=e("<div/>",{class:"btn-group"}),f=0;f<r[h].length;f++){var v=r[h][f];if(s[v]){var x=a.createMenuItem.apply(this,[o[v],s[v],!0]);g.append(x)}s[v]=!1}c.append(g)}else{x=a.createMenuItem.apply(this,[o[h],s[h],!0]);c.append(x)}else if(s[h]in r)for(var b in r[h])s[b]=!1;e(document.body).mousedown(function(t){var a=e(t.target);a.parents().andSelf().is("#context-menu")||e("#context-menu").remove(),a.parents().andSelf().is("#specialchar")||'<i class="fa fa-asterisk"></i>'==a.closest("a").html()||e("#specialchar").is(":visible")&&(e(u).data("editor").data("splcharsBtn",null),e("#specialchar").remove()),a.parents().andSelf().is("#paletteCntr")||'<i class="fa fa-font"></i>'==a.closest("a").html()||e("#paletteCntr").is(":visible")&&(e(u).data("editor").data("colorBtn",null),e("#paletteCntr").remove())}),p.bind("contextmenu",function(t){e("#context-menu").length&&e("#context-menu").remove();var n=e("<div/>",{id:"context-menu"}).css({position:"absolute",top:t.pageY,left:t.pageX,"z-index":9999}).click(function(e){e.stopPropagation()}),l=e("<ul/>",{class:"dropdown-menu on",role:"menu"});t.preventDefault(),e(t.target).is("a")?(a.createLinkContext.apply(this,[t,l]),l.appendTo(n),n.appendTo("body")):e(t.target).is("td")||e(t.target).is("th")?(a.createTableContext.apply(this,[t,l]),l.appendTo(n),n.appendTo("body")):e(t.target).is("img")&&(a.createImageContext.apply(this,[t,l]),l.appendTo(n),n.appendTo("body"))})},createLinkContext:function(t,a){var n;e("<li/>").append(e("<a/>",{id:"rem_link",href:"javascript:void(0)",text:"RemoveLink"}).click((n=t,function(){e(n.target).contents().unwrap(),e("#context-menu").remove()}))).appendTo(a)},createImageContext:function(t,n){var l="imgAttribute",i=a.imageAttributeWidget.apply(this,["edit"]);a.createModal.apply(this,[l,"Image Attributes",i,function(){var t=e("#imgAlt").val(),n=e("#imgTarget").val();if(""==t)return a.showMessage.apply(this,["imageErrMsg","Please enter image alternative text"]),!1;if(""!=n&&!n.match(/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/))return a.showMessage.apply(this,["imageErrMsg","Please enter valid url"]),!1;if(""!=e("#imgHidden").val()){var l=e("#imgHidden").val();e("#"+l).attr("alt",t),""!=n?e("#wrap_"+l).length?e("#wrap_"+l).attr("href",n):e("#"+l).wrap(e("<a/>",{id:"wrap_"+l,href:n,target:"_blank"})):e("#wrap_"+l).length&&e("#"+l).unwrap()}e("#imgAttribute").modal("hide"),e(this).data("editor").focus()}]);var o,r,s=e("<a/>",{href:"#"+l,text:"Image Attributes","data-toggle":"modal"}).click((o=t,function(){e("#context-menu").remove();var t=(new Date).getTime();if(e("#imgAlt").val(e(o.target).closest("img").attr("alt")),e("#imgTarget").val(""),void 0!==e(o.target).closest("img").attr("id")){var a=e(o.target).closest("img").attr("id");e("#imgHidden").val(a),e("#wrap_"+a).length?e("#imgTarget").val(e("#wrap_"+a).attr("href")):e("#imgTarget").val("")}else e(o.target).closest("img").attr("id","img_"+t),e("#imgHidden").val("img_"+t)}));n.append(e("<li/>").append(s)).append(e("<li/>").append(e("<a/>",{text:"Remove Image"}).click((r=t,function(){e("#context-menu").remove(),e(r.target).closest("img").remove()}))))},createTableContext:function(t,n){e("#editProperties").remove();var l="editProperties",i=a.tableWidget.apply(this,["edit"]);a.createModal.apply(this,[l,"Table Properties",i,function(){var n=e("#tblWidthEdt").val(),l=e("#tblHeightEdt").val(),i=e("#tblBorderEdt").val(),o=e("#tblAlignEdt").val(),r=e("#tblCellspacingEdt").val(),s=e("#tblCellpaddingEdt").val(),d=/^auto$|^[+-]?[0-9]+\.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc)?$/gi,c=/^[0-9]+\.?([0-9])?$/;return""!=n&&!n.match(d)||""!=l&&!l.match(d)?(a.showMessage.apply(this,["tblErrMsgEdt","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]),!1):""==i||i.match(c)?""==r||r.match(c)?""==s||s.match(c)?(e(t.target).closest("table").css("width",n),""!=l&&e(t.target).closest("table").css("height",l),e(t.target).closest("table").attr("align",o),e(t.target).closest("table").attr("border",i),e(t.target).closest("table").attr("cellspacing",r),e(t.target).closest("table").attr("cellpadding",s),e("#editProperties").modal("hide"),void e(this).data("editor").focus()):(a.showMessage.apply(this,["tblErrMsgEdt","Cell padding must be a positive number"]),!1):(a.showMessage.apply(this,["tblErrMsgEdt","Cell spacing must be a positive number"]),!1):(a.showMessage.apply(this,["tblErrMsgEdt","Border size must be a positive number"]),!1)}]);var o,r,s,d,c,p,m=e("<a/>",{href:"#"+l,text:"Table Properties","data-toggle":"modal"}).click((o=t,function(){e("#context-menu").remove(),e("#tblRowsEdt").val(e(o.target).closest("table").prop("rows").length),e("#tblColumnsEdt").val(e(o.target).closest("table").find("tr")[0].cells.length),e("#tblRowsEdt").attr("disabled","disabled"),e("#tblColumnsEdt").attr("disabled","disabled"),e("#tblWidthEdt").val(e(o.target).closest("table").get(0).style.width),e("#tblHeightEdt").val(e(o.target).closest("table").get(0).style.height),e("#tblAlignEdt").val(e(o.target).closest("table").attr("align")),e("#tblBorderEdt").val(e(o.target).closest("table").attr("border")),e("#tblCellspacingEdt").val(e(o.target).closest("table").attr("cellspacing")),e("#tblCellpaddingEdt").val(e(o.target).closest("table").attr("cellpadding"))}));n.append(e("<li/>",{class:"dropdown-submenu",css:{display:"block"}}).append(e("<a/>",{tabindex:"-1",href:"javascript:void(0)",text:"Row"})).append(e("<ul/>",{class:"dropdown-menu"}).append(e("<li/>").append(e("<a/>",{id:"tbl_addrow",href:"javascript:void(0)",text:"Add Row"}).click((c=t,function(){e("#context-menu").remove();var t=e(c.target).closest("tr"),a=e("<tr/>");t.children().each(function(){var t=e("<"+e(this).prop("nodeName")+"/>").html("&nbsp;");a.append(t)}),t.after(a)})))).append(e("<li/>").append(e("<a/>",{text:"Remove Row"}).click((d=t,function(){e("#context-menu").remove(),e(d.target).closest("tr").remove()})))))).append(e("<li/>",{class:"dropdown-submenu",css:{display:"block"}}).append(e("<a/>",{tabindex:"-1",href:"javascript:void(0)",text:"Column"})).append(e("<ul/>",{class:"dropdown-menu"}).append(e("<li/>").append(e("<a/>",{id:"tbl_addcolumn",href:"javascript:void(0)",text:"Add Column"}).click((s=t,function(){e("#context-menu").remove();var t=e(s.target),a=t.siblings().addBack().index(t);t.closest("table").find("tr").each(function(){var t=e(this).children(":eq("+a+")"),n=e("<"+t.prop("nodeName")+"/>").html("&nbsp;");t.after(n)})})))).append(e("<li/>").append(e("<a/>",{text:"Remove Column"}).click((r=t,function(){e("#context-menu").remove();var t=e(r.target),a=t.siblings().addBack().index(t);t.closest("table").find("tr").each(function(){e(this).children(":eq("+a+")").remove()})})))))),n.append(e("<li/>").append(m)).append(e("<li/>",{class:"divider"})).append(e("<li/>").append(e("<a/>",{text:"Remove Table"}).click((p=t,function(){e("#context-menu").remove(),e(p.target).closest("table").remove()}))))},createModal:function(t,a,n,l){var i,o=e("<a/>",{href:"#"+t,role:"button",class:"btn btn-default","data-toggle":"modal"});return e("<div/>",{id:t,class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"h3_"+t,"aria-hidden":"true"}).append(e("<div>",{class:"modal-dialog"}).append(e("<div>",{class:"modal-content"}).append(e("<div>",{class:"modal-header"}).append(e("<button/>",{type:"button",class:"close","data-dismiss":"modal","aria-hidden":"true"}).html("x")).append(e("<h3/>",{id:"h3_"+t}).html(a))).append(e("<div>",{class:"modal-body"}).append(n)).append(e("<div>",{class:"modal-footer"}).append(e("<button/>",{type:"button",class:"btn btn-default","data-dismiss":"modal","aria-hidden":"true"}).html("Cancel")).append(e("<button/>",{type:"button",class:"btn btn-success"}).html("Done").mousedown(function(e){e.preventDefault()}).click((i=this,function(){l.apply(i)})))))).appendTo("body"),o},createMenuItem:function(t,n,l){if(t.select){var i=e("<div/>",{class:"btn-group"}),o=e("<ul/>",{class:"dropdown-menu"});i.append(e("<a/>",{class:"btn btn-default dropdown-toggle","data-toggle":"dropdown",href:"javascript:void(0)",title:t.tooltip}).html(t.default).append(e("<span/>",{class:"caret"})).mousedown(function(e){e.preventDefault()})),e.each(n,function(t,a){var n=e("<li/>");e("<a/>",{tabindex:"-1",href:"javascript:void(0)"}).html(t).appendTo(n),n.click(function(){e(this).parent().parent().data("value",a),e(this).parent().parent().trigger("change")}),o.append(n)});var r="change"}else{if(t.modal){i=a.createModal.apply(this,[t.modalId,t.modalHeader,t.modalBody,t.onSave]),o=e("<i/>");return t.icon?o.addClass(t.icon):o.html(t.text),i.append(o),i.mousedown((s=this,d=a,c=t.beforeLoad,function(e){e.preventDefault(),d.saveSelection.apply(s),c&&c.apply(s)})),i.attr("title",t.tooltip),i}i=e("<a/>",{href:"javascript:void(0)",class:"btn btn-default"}),o=e("<i/>");t.icon?o.addClass(t.icon):o.html(t.text);r="click"}var s,d,c,p,m;if(t.custom?i.bind(r,(p=this,m=t.params,function(){a.saveSelection.apply(p),t.custom.apply(p,[e(this),m])})):(i.data("commandName",t.commandname),i.data("editor",e(this).data("editor")),i.bind(r,function(){a.setTextFormat.apply(this)})),i.attr("title",t.tooltip),i.css("cursor","pointer"),i.append(o),l)return i;e(this).data("menuBar").append(i)},setTextFormat:function(){return a.setStyleWithCSS.apply(this),document.execCommand(e(this).data("commandName"),!1,e(this).data("value")||null),e(this).data("editor").focus(),!1},getSource:function(t,a){var n=0;t.data("state")?(n=1,t.data("state",null)):t.data("state",1),e(this).data("source-mode",!n);var l,i=e(this).data("editor");if(0==n)l=document.createTextNode(i.html()),i.empty(),i.attr("contenteditable",!1),preElement=e("<pre/>",{contenteditable:!0}),preElement.append(l),i.append(preElement),t.parent().siblings().hide(),t.siblings().hide();else{var o=i.children().first().text();i.html(o),i.attr("contenteditable",!0),t.parent().siblings().show(),t.siblings().show()}},countWords:function(t){for(var n=0,l=t.contents().filter(function(){return 3==this.nodeType}),i=0;i<l.length;i++)text=l[i].textContent,text=text.replace(/[^-\w\s]/gi," "),text=e.trim(text),n+=text.split(/\s+/).length;t.children().each(function(){n+=a.countWords.apply(this,[e(this)])});return n},countChars:function(t){for(var n=0,l=t.contents().filter(function(){return 3==this.nodeType}),i=0;i<l.length;i++)text=l[i].textContent,n+=text.length;t.children().each(function(){n+=a.countChars.apply(this,[e(this)])});return n},getWordCount:function(){return a.countWords.apply(this,[e(this).data("editor")])},getCharCount:function(){return a.countChars.apply(this,[e(this).data("editor")])},rgbToHex:function(e){return e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2)},showMessage:function(t,a){e("<div/>",{class:"alert alert-danger"}).append(e("<button/>",{type:"button",class:"close","data-dismiss":"alert",html:"x"})).append(e("<span/>").html(a)).appendTo(e("#"+t)),setTimeout(function(){e(".alert").alert("close")},3e3)},getText:function(){return e(this).data("source-mode")?e(this).data("editor").children().first().text():e(this).data("editor").html()},setText:function(t){e(this).data("source-mode")?e(this).data("editor").children().first().text(t):e(this).data("editor").html(t)},setStyleWithCSS:function(){if(navigator.userAgent.match(/MSIE/i))try{Editor.execCommand("styleWithCSS",0,!1)}catch(e){try{Editor.execCommand("useCSS",0,!0)}catch(e){try{Editor.execCommand("styleWithCSS",!1,!1)}catch(e){}}}else document.execCommand("styleWithCSS",null,!0)}};e.fn.Editor=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.Editor"):a.init.apply(this,arguments)}}(jQuery);